{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import Newsitem from'./Newsitem';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const News=props=>{const CapitalizeFirstLetter=string=>{return string[0].toUpperCase()+string.slice(1);};document.title=`${CapitalizeFirstLetter(props.category)} - NewsMonkey`;const[articles,setArticles]=useState([]);const[Loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalResults,setTotalResults]=useState(0);// ✅ Yaha apna backend ka URL use kar\nconst backendBaseUrl=\"http://news-backend-jp4z.onrender.com\";// Deploy hone ke baad replace kar dena:\n// const backendBaseUrl = \"https://<your-backend>.onrender.com\";\nconst fetchNews=useCallback(async()=>{try{setLoading(true);let url=`${backendBaseUrl}/api/news?category=${props.category}&pageSize=${props.pageSize}&page=1`;let data=await fetch(url);let parsedData=await data.json();console.log(parsedData);if(parsedData.articles&&Array.isArray(parsedData.articles)){setArticles(parsedData.articles);setTotalResults(parsedData.totalResults||0);}else{setArticles([]);setTotalResults(0);}setPage(2);}catch(error){console.error('Error fetching news:',error);setArticles([]);setTotalResults(0);}finally{setLoading(false);}},[props.category,props.pageSize]);useEffect(()=>{setArticles([]);setPage(1);fetchNews();},[props.category,fetchNews]);const fetchMoreData=async()=>{try{setLoading(true);let url=`${backendBaseUrl}/api/news?category=${props.category}&pageSize=${props.pageSize}&page=${page}`;let data=await fetch(url);let parsedData=await data.json();console.log(parsedData);if(parsedData.articles&&Array.isArray(parsedData.articles)){setArticles(prevArticles=>{const allArticles=[...prevArticles,...parsedData.articles];const uniqueArticles=allArticles.filter((article,index,self)=>index===self.findIndex(a=>a.url===article.url));return uniqueArticles;});setPage(prevPage=>prevPage+1);}}catch(error){console.error('Error fetching more news:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center sticky \",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"News-Monkey Top Headlines - News from \",CapitalizeFirstLetter(props.category)]})}),Loading&&articles.length===0&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{next:fetchMoreData,hasMore:articles.length<totalResults,dataLength:articles.length,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles&&articles.length>0&&articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-5\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title,Description:element.description,imageUrl:element.urlToImage,newsUrl:element.url})},element.url);})})})})]});};export default News;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Newsitem","Spinner","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","News","props","CapitalizeFirstLetter","string","toUpperCase","slice","document","title","category","articles","setArticles","Loading","setLoading","page","setPage","totalResults","setTotalResults","backendBaseUrl","fetchNews","url","pageSize","data","fetch","parsedData","json","console","log","Array","isArray","error","fetchMoreData","prevArticles","allArticles","uniqueArticles","filter","article","index","self","findIndex","a","prevPage","className","children","length","next","hasMore","dataLength","loader","map","element","Description","description","imageUrl","urlToImage","newsUrl"],"sources":["C:/Users/terab/OneDrive/Desktop/REACT/project-2-app/src/components/News.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport Newsitem from './Newsitem';\r\nimport Spinner from './Spinner';\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props)=>  {\r\n\r\n    const CapitalizeFirstLetter = (string)=> {\r\n        return string[0].toUpperCase() + string.slice(1);\r\n    }\r\n    document.title = `${CapitalizeFirstLetter(props.category)} - NewsMonkey`;\r\n\r\n    const [articles, setArticles] = useState([])\r\n    const [Loading, setLoading] = useState(true)\r\n    const [page, setPage] = useState(1)\r\n    const [totalResults, setTotalResults] = useState(0)\r\n\r\n    // ✅ Yaha apna backend ka URL use kar\r\n    const backendBaseUrl = \"http://news-backend-jp4z.onrender.com\"; \r\n    // Deploy hone ke baad replace kar dena:\r\n    // const backendBaseUrl = \"https://<your-backend>.onrender.com\";\r\n\r\n    const fetchNews = useCallback(async()=> {\r\n        try {\r\n            setLoading(true);\r\n            let url = `${backendBaseUrl}/api/news?category=${props.category}&pageSize=${props.pageSize}&page=1`;\r\n            let data = await fetch(url);\r\n            let parsedData = await data.json();\r\n            console.log(parsedData);\r\n\r\n            if (parsedData.articles && Array.isArray(parsedData.articles)) {\r\n                setArticles(parsedData.articles);\r\n                setTotalResults(parsedData.totalResults || 0);\r\n            } else {\r\n                setArticles([]);\r\n                setTotalResults(0);\r\n            }\r\n            setPage(2); \r\n        } catch (error) {\r\n            console.error('Error fetching news:', error);\r\n            setArticles([]);\r\n            setTotalResults(0);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [props.category, props.pageSize]);\r\n\r\n    useEffect(()=>{\r\n        setArticles([]);\r\n        setPage(1);\r\n        fetchNews();\r\n    }, [props.category, fetchNews]);\r\n\r\n    const fetchMoreData = async()=> {\r\n        try {\r\n            setLoading(true);\r\n            let url = `${backendBaseUrl}/api/news?category=${props.category}&pageSize=${props.pageSize}&page=${page}`;\r\n            let data = await fetch(url);\r\n            let parsedData = await data.json();\r\n            console.log(parsedData);\r\n\r\n            if (parsedData.articles && Array.isArray(parsedData.articles)) {\r\n                setArticles((prevArticles) => {\r\n                    const allArticles = [...prevArticles, ...parsedData.articles];\r\n                    const uniqueArticles = allArticles.filter((article, index, self) =>\r\n                        index === self.findIndex((a) => a.url === article.url)\r\n                    );\r\n                    return uniqueArticles;\r\n                });\r\n                setPage(prevPage => prevPage + 1);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching more news:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='container my-3'>\r\n            <h2 className='text-center sticky '>\r\n                <b>News-Monkey Top Headlines - News from {CapitalizeFirstLetter(props.category)}</b>\r\n            </h2>\r\n            {Loading && articles.length === 0 && <Spinner/>}\r\n            <InfiniteScroll\r\n                next={fetchMoreData}\r\n                hasMore={articles.length < totalResults}\r\n                dataLength={articles.length}\r\n                loader={<Spinner/>}\r\n            > \r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        {articles && articles.length > 0 && articles.map((element) => { \r\n                            return (\r\n                                <div className='col-md-4 my-5' key={element.url}>\r\n                                    <Newsitem \r\n                                        title={element.title} \r\n                                        Description={element.description} \r\n                                        imageUrl={element.urlToImage}\r\n                                        newsUrl={element.url} \r\n                                    />\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </InfiniteScroll>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default News;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}