{"ast":null,"code":"import React,{useEffect,useState}from'react';import Newsitem from'./Newsitem';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const News=props=>{const CapitalizeFirstLetter=string=>{return string[0].toUpperCase()+string.slice(1);};document.title=\"\".concat(CapitalizeFirstLetter(props.category),\" - NewsMonkey\");const[articles,setArticles]=useState([]);const[Loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalResults,setTotalResults]=useState(0);//https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=636a0b4b78574390aa3f98b7e296c345\nuseEffect(()=>{setArticles([]);// Clear previous articles before fetching new ones\nsetPage(1);fetchNews();},[props.category]);const fetchNews=async()=>{let url=\"https://newsapi.org/v2/top-headlines?country=us&category=\".concat(props.category,\"&apiKey=\").concat(process.env.REACT_APP_NEWS_API_KEY,\"&pageSize=\").concat(props.pageSize);let data=await fetch(url);setLoading(true);let parsedData=await data.json();console.log(parsedData);setArticles(parsedData.articles);setPage(page+1);setTotalResults(parsedData.totalResults||0);setLoading(false);};const fetchMoreData=async()=>{let url=\"https://newsapi.org/v2/top-headlines?country=us&category=\".concat(props.category,\"&apiKey=\").concat(process.env.REACT_APP_NEWS_API_KEY,\"&pageSize=\").concat(props.pageSize,\"&page=\").concat(page+1);setLoading(true);let data=await fetch(url);let parsedData=await data.json();console.log(parsedData);setArticles(prevArticles=>{const allArticles=[...prevArticles,...parsedData.articles];const uniqueArticles=allArticles.filter((article,index,self)=>index===self.findIndex(a=>a.url===article.url));return uniqueArticles;});setPage(page+1);setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center sticky \",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Aaj Tak-Top Headlines-News from \",CapitalizeFirstLetter(props.category)]})}),/*#__PURE__*/_jsx(InfiniteScroll,{next:fetchMoreData,hasMore:true,dataLength:articles.length,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles===null||articles===void 0?void 0:articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-5\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title,Description:element.description,imageUrl:element.urlToImage,newsUrl:element.url})},element.url);})})})})]});};export default News;","map":{"version":3,"names":["React","useEffect","useState","Newsitem","Spinner","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","News","props","CapitalizeFirstLetter","string","toUpperCase","slice","document","title","concat","category","articles","setArticles","Loading","setLoading","page","setPage","totalResults","setTotalResults","fetchNews","url","process","env","REACT_APP_NEWS_API_KEY","pageSize","data","fetch","parsedData","json","console","log","fetchMoreData","prevArticles","allArticles","uniqueArticles","filter","article","index","self","findIndex","a","className","children","next","hasMore","dataLength","length","loader","map","element","Description","description","imageUrl","urlToImage","newsUrl"],"sources":["C:/Users/terab/OneDrive/Desktop/REACT/project-2-app/src/components/News.js"],"sourcesContent":["\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Newsitem from './Newsitem';\r\nimport Spinner from './Spinner';\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\n\r\n\r\nconst News = (props)=>  {\r\n   \r\n    const CapitalizeFirstLetter = (string)=> {\r\n        return string[0].toUpperCase() + string.slice(1);\r\n      }\r\n      document.title = `${CapitalizeFirstLetter(props.category)} - NewsMonkey`;\r\n      \r\n        const [articles, setArticles] = useState([])\r\n        const [Loading, setLoading] = useState(true)\r\n        const [page, setPage] = useState(1)\r\n        const [totalResults, setTotalResults] = useState(0)\r\n\r\n    \r\n    //https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=636a0b4b78574390aa3f98b7e296c345\r\n    useEffect(()=>{\r\n        setArticles([]); // Clear previous articles before fetching new ones\r\n    setPage(1);\r\n\r\n        fetchNews();\r\n            },[props.category])\r\n\r\n   const  fetchNews= async()=>{\r\n    let url = `https://newsapi.org/v2/top-headlines?country=us&category=${props.category}&apiKey=${process.env.REACT_APP_NEWS_API_KEY}&pageSize=${props.pageSize}`;\r\n    let data = await fetch(url);\r\n    setLoading(true);\r\n    let parsedData = await data.json();\r\n    console.log(parsedData);\r\n    setArticles(parsedData.articles);\r\n    setPage(page+1);\r\n    setTotalResults(parsedData.totalResults || 0);\r\n    setLoading(false);\r\n\r\n    \r\n   }\r\n   const fetchMoreData = async()=>{\r\n    let url = `https://newsapi.org/v2/top-headlines?country=us&category=${props.category}&apiKey=${process.env.REACT_APP_NEWS_API_KEY}&pageSize=${props.pageSize}&page=${page + 1 }`;\r\n    setLoading(true);\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    console.log(parsedData);\r\n     setArticles((prevArticles) => {\r\n        const allArticles =[...prevArticles, ...parsedData.articles];\r\n        const uniqueArticles = allArticles.filter((article, index, self) =>\r\n            index === self.findIndex((a) => a.url === article.url)\r\n        );\r\n        return uniqueArticles;\r\n     });\r\n     setPage(page+1);\r\n     setLoading(false);\r\n\r\n   }\r\n    \r\n\r\n    \r\n        return (\r\n            <div className='container my-3'>\r\n                <h2 className='text-center sticky '><b>Aaj Tak-Top Headlines-News from {CapitalizeFirstLetter(props.category)}</b></h2>\r\n               {/* { Loading && <Spinner/>} */}\r\n               <InfiniteScroll\r\n                    next={fetchMoreData}\r\n                    hasMore={true}\r\n                    dataLength={articles.length}\r\n                    loader={<Spinner/> }> \r\n                      <div className=\"container\">\r\n                              <div className=\"row\">\r\n                              { articles?.map((element) => { \r\n              \r\n                                      return (\r\n                                          <div className='col-md-4 my-5' key={element.url}>\r\n                                              <Newsitem \r\n                                                  title={element.title} \r\n                                                  Description={element.description} \r\n                                                  imageUrl={element.urlToImage}\r\n                                                  newsUrl={element.url} \r\n                                              />\r\n                                          </div>\r\n                                      );\r\n                                  })}\r\n                              </div>\r\n                </div>\r\n                </InfiniteScroll>\r\n                {/* <div className=\"container-3 d-flex justify-content-between\">\r\n                    <button type=\"button\"  disabled={page <= 1} className=\"btn btn-dark\">&larr; previous</button>\r\n                    <button type=\"button\"  className=\"btn btn-dark\">Next &rarr;</button>\r\n                </div> */}\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\nexport default News;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}